<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
  </head>
  <body>
    <h1>Smart Lock Visitor Client</h1>
    <p>
      This is an example of how the visitor authentication feature can work.
    </p>
    <h2>Visitors</h2>
    <ul id="container-visitors"></ul>
    <script>
      const visitors = document.getElementById('container-visitors');

      fetch('http://127.0.0.1:8080/api/visitors')
        .then(response => response.json())
        .then(data => {
          let visitor_keys = data['data']['visitor_keys'];
          visitor_keys.forEach((key) => {
            let label = document.createElement('li');
            label.appendChild(document.createTextNode(key));
            label.addEventListener('click', () => { window.alert("Share this URL:\n172.0.0.1:8081/" + key); });
            visitors.appendChild(label);
          });
        });
    </script>
  </body>
</html>
